# Automata DCAP Attestation

## Release Note

This release applies to both source codes in the `/evm` and `/solana` directories.

---

## zkProgram Identifiers

These identifiers are required parameters for SNARK proof verifications, to show that the proofs are generated by the intended zkVM Program.

The [ImageID](https://dev.risczero.com/terminology#image-id) currently for the DCAP RiscZero Guest Program is 0x86ce2fcc83810f39791f81fc89d36488a061e2f1ea48df9057417a079251352a.

The [VKEY](https://docs.succinct.xyz/verification/onchain/solidity-sdk.html?#finding-your-program-vkey) currently for the DCAP SP1 Program is 0x004b1c0509dc0eee05ad437e3600027bd8cb3fbb03b29bf9cd839ae2e684c749.

---

## Contract Deployment (EVM)

### Testnet

| Contract | Network | Address |
| --- | --- | --- |
| `PCCSRouter.sol` | Automata Testnet | [0x596Da214F6Afd15078eD72884b69D9af0C4897a1](https://explorer-testnet.ata.network/address/0x596Da214F6Afd15078eD72884b69D9af0C4897a1) |
|  | Ethereum Sepolia | [0x96b531b28E19Bc7887e9c07797bF504aD497aBED](https://sepolia.etherscan.io/address/0x96b531b28E19Bc7887e9c07797bF504aD497aBED) |
|  | Ethereum Holesky | [0x96b531b28E19Bc7887e9c07797bF504aD497aBED](https://holesky.etherscan.io/address/0x96b531b28E19Bc7887e9c07797bF504aD497aBED) |
| `AutomataDcapAttestationFee.sol` | Automata Testnet | [0x27188ABA3a26CBb806eF4C67de9b05D7d792EC10](https://explorer-testnet.ata.network/address/0x27188ABA3a26CBb806eF4C67de9b05D7d792EC10) |
|  | Ethereum Sepolia | [0x27188ABA3a26CBb806eF4C67de9b05D7d792EC10](https://sepolia.etherscan.io/address/0x27188ABA3a26CBb806eF4C67de9b05D7d792EC10) |
|  | Ethereum Holesky | [0x27188ABA3a26CBb806eF4C67de9b05D7d792EC10](https://holesky.etherscan.io/address/0x27188ABA3a26CBb806eF4C67de9b05D7d792EC10) |
| `V3QuoteVerifier.sol` | Automata Testnet | [0x33DE814767eB99eD1D963033bc76c65Aa65B24a5](https://explorer-testnet.ata.network/address/0x33DE814767eB99eD1D963033bc76c65Aa65B24a5) |
|  | Ethereum Sepolia | [0x9521937af2e2394b2bB0d3dFc43dbc131B82D34C](https://sepolia.etherscan.io/address/0x9521937af2e2394b2bB0d3dFc43dbc131B82D34C) |
|  | Ethereum Holesky | [0x9521937af2e2394b2bB0d3dFc43dbc131B82D34C](https://holesky.etherscan.io/address/0x9521937af2e2394b2bB0d3dFc43dbc131B82D34C) |
| `V4QuoteVerifier.sol` | Automata Testnet | [0xAA68FEc3281Af295EE37CFf279852Fa5C20FD227](https://explorer-testnet.ata.network/address/0xAA68FEc3281Af295EE37CFf279852Fa5C20FD227) |
|  | Ethereum Sepolia | [0x814D9eD4cBdb922684d5AeB40bd45CD3489F3CD4](https://sepolia.etherscan.io/address/0x814D9eD4cBdb922684d5AeB40bd45CD3489F3CD4) |
|  | Ethereum Holesky | [0x814D9eD4cBdb922684d5AeB40bd45CD3489F3CD4](https://holesky.etherscan.io/address/0x814D9eD4cBdb922684d5AeB40bd45CD3489F3CD4) |

### Mainnet

| Contract | Network | Address |
| --- | --- | --- |
| `PCCSRouter.sol` | Automata Mainnet | [0x596Da214F6Afd15078eD72884b69D9af0C4897a1](https://explorer.ata.network/address/0x596Da214F6Afd15078eD72884b69D9af0C4897a1) |
| `AutomataDcapAttestationFee.sol` | Automata Mainnet | [0x27188ABA3a26CBb806eF4C67de9b05D7d792EC10](https://explorer.ata.network/address/0x27188ABA3a26CBb806eF4C67de9b05D7d792EC10) |
| `V3QuoteVerifier.sol` | Automata Mainnet | [0x33DE814767eB99eD1D963033bc76c65Aa65B24a5](https://explorer.ata.network/address/0x33DE814767eB99eD1D963033bc76c65Aa65B24a5) |
| `V4QuoteVerifier.sol` | Automata Mainnet | [0xAA68FEc3281Af295EE37CFf279852Fa5C20FD227](https://explorer.ata.network/address/0xAA68FEc3281Af295EE37CFf279852Fa5C20FD227) |

---

## What's Changed?

### EVM

- Debuting "versioned" DAOs. I.e. collaterals are further categorized by their TCB Evaluation Data Number. This affects both FMSPC TCB and QE Identity collaterals.

- PCCS Router Changes and Fixes:
    - Interface to perform admin configurations for `TcbEvalDao` and versioned `FMSPC` and `QEIdentity` DAOs has been added to the PCCS Router contract.
        - [9874573](https://github.com/automata-network/automata-dcap-attestation/commit/9874573fcd9080851e094dcfa90aa6c7c33905b2)
    - Both FMSPC and QE Identity must be fetched from their corresponding versioned DAOs.
        - [01733e3](https://github.com/automata-network/automata-dcap-attestation/commit/01733e37f8df62847318ae08c38c6f2f95f8eb17)
    - Reads collateral from `TcbEvalDao` to get `standard()` and `early()` TCB Evaluation Data Number
    - Fixed incorrect collateral validity check.
        - Closes issue [#50](https://github.com/automata-network/automata-dcap-attestation/issues/50)
        - [6246682](https://github.com/automata-network/automata-dcap-attestation/commit/62466820089a124ac872e6cedbae2a4cdae416b0)
- Automata DCAP Attestation Changes:
    - New interface to include TCB Evaluation Data Number as an argument
        - Commit [#060dd0d](https://github.com/automata-network/automata-dcap-attestation/pull/52/commits/060dd0d6a61facf3f0ae68f6dd23ab45acbd6fee)
    - Multiple zkVM Program Identifiers in a single zkVM configuration
        - PR [#46](https://github.com/automata-network/automata-dcap-attestation/pull/46)
    - Quote Verification Code Refactoring and support for QuoteV5
        - PR [#51](https://github.com/automata-network/automata-dcap-attestation/pull/51)
- Misc:
    - Closes issue [#50](https://github.com/automata-network/automata-dcap-attestation/issues/50) with commit [#624668](https://github.com/automata-network/automata-dcap-attestation/pull/52/commits/62466820089a124ac872e6cedbae2a4cdae416b0)
    - PRs [#33](https://github.com/automata-network/automata-dcap-attestation/pull/33) and [#43](https://github.com/automata-network/automata-dcap-attestation/pull/43)

### Solana

- Solana PCCS and DCAP Verifier with SP1 Integration
    - PR [#54](https://github.com/automata-network/automata-dcap-attestation/pull/54)