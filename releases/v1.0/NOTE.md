# Automata DCAP Attestation

## Release Note

A production-ready release of the Automata DCAP Attestation EVM Solidity Smart Contracts. 

This release only applies to source code located in the `/evm` directory.

---

## zkProgram Identifiers

These identifiers are required parameters for SNARK proof verifications, to show that the proofs are generated by the intended zkVM Program.

The [ImageID](https://dev.risczero.com/terminology#image-id) currently for the DCAP RiscZero Guest Program is 0x58fd3069a6965c9382f6d0c0e7a4a1590520c37df5ecc832e571150305a82aff.

The [VKEY](https://docs.succinct.xyz/docs/sp1/verification/solidity-sdk#finding-your-program-vkey) currently for the DCAP SP1 Program is
0x0021feaf3f6c78429dac7756fac5cfed39b606e34603443409733e13a1cf06cc.

---

## Contract Deployment (EVM)

> â„¹ï¸ **UPDATE (March 2025)**ï¼š The EVM contracts for both [Automata On Chain PCCS](https://github.com/automata-network/automata-on-chain-pccs) and Automata DCAP Attestation have been fully audited by Trail of Bits. 
>
> Click [here](https://github.com/trailofbits/publications/blob/master/reviews/2025-02-automata-dcap-attestation-onchain-pccs-securityreview.pdf) to view the audit report.


Click [here](../../rust-crates/libraries/network-registry/deployment/v1.0/DEPLOYMENT.md) to get the contract deployment info.

---

## What's Changed?

- The contract has been fully audited by Trail of Bits.  
  [ðŸ”— View the full audit report](https://github.com/trailofbits/publications/blob/master/reviews/2025-02-automata-dcap-attestation-onchain-pccs-securityreview.pdf)

- Integrated [RIP-7212](https://github.com/ethereum/RIPs/blob/master/RIPS/rip-7212.md) for cheaper secp256r1 ECDSA verification on supported networks.

- TEE Type values are encoded and handled in little-endian order.

- Intel PCK Certificate Chain must now contain exactly 3 X509 Certificates.

- PCCS Router checks the validity window before loading the full collateral data, which prevents wasting gas on loading expired collaterals into memory.

- Checks Attestation Timestamp for Quote Verifications with ZK.

- Checks `TcbInfo` and `QEIdentity` for Quote Verification with ZK.

- Event logs are emitted for all state-changing functions.

---

[ðŸ‘‰ Full Changelog (`v0.1.1...evm-v1.0.0`)](https://github.com/automata-network/automata-dcap-attestation/compare/v0.1.1...evm-v1.0.0)
